<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="/public/css/style.css" rel="stylesheet">

    <!-- JavaScript Libraries -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <!-- Favicon -->
    <link rel="icon" href="/public/assets/favicon.webp" type="image/x-icon">
    <!-- Page Title -->
    <title>Security Control Simulation System</title>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="custom-navbar">
        <div class="navbar-logo">
            <a>SCSS</a>
        </div>
    </nav>

    <section class="info">
        <h1>Consent Form</h1>
        <h2><b>Name of Lead Investigator:</b> Molly Haines</h2>
        <br>
        <p>I confirm that I have read the information sheet and understand that my participation in this project which will require approximately 45 minutes of my time for which I will be awarded 3 EMS course credits for taking part.</p>
        <p>I understand that participation will involve completing a cybersecurity data classification task and filling out a questionnaire. I agree to use this on the understanding that the eye-tracking program will not record or stream any information, it will only track where I am looking on the screen, and the data sent back to the researchers will be entirely numerical and will be compiled alongside my task results.</p>
        <p>I understand that participation in this study is entirely voluntary and that I can withdraw from the study at any time without giving a reason, without any adverse consequences, and without loss of course credit, up to the point of data anonymisation.</p>
        <p>I understand that the information provided by me will be held anonymously, so it is not possible to trace this information back to me individually, who will have access to the information provided, how the data will be stored and what will happen to the data at the end of the research project. I understand that this information may be retained indefinitely, and the results of this research project will be written up and maybe published.</p>
        <p>I also understand that at the end of the study, I will be provided with additional information and feedback about the purpose of the study.</p>
        <p>I understand that I am free to ask any questions at any time. I am free to withdraw or discuss my concerns with the project supervisor:</p>
        <p>Prof. Phillip Morgan: <a href="mailto:morganphil@cardiff.ac.uk">morganphil@cardiff.ac.uk</a></p>
        <p>or the School of Psychology Research Ethics committee: <a href="mailto:psychethics@cardiff.ac.uk">psychethics@cardiff.ac.uk</a></p>
        <p><b>Please tick the required box next to each statement below as an electronic signature confirming your understanding and agreement.</b></p>
        
        <!-- Consent form -->

        
        <section class="consent">
            <div class="d-flex w-100 justify-content-between">
                <input type="checkbox" class="form-check-input" id="consent-checkbox" name="consent-checkbox">
                <label for="consent-checkbox" class="form-check-label">
                    I consent to participate in the study conducted by Molly Haines of Psychology, Cardiff University with the supervision of Prof. Phillip Morgan.</label>
            </div>
            <br><br>
            <!-- Consent checkboxes for each statement -->
        
            <div class="row align-items-center">
                <div class="col-12 d-flex">
                    <input type="checkbox" class="form-check-input me-2" style="margin-left: -1.0rem;" name="consent-statement">
                    <p class="mb-0">I confirm that I have read the information sheet on the previous page.</p>
                </div>
            </div>
            <br><br>
        
            <div class="row align-items-center">
                <div class="col-12 d-flex">
                    <input type="checkbox" class="form-check-input me-2" style="margin-left: -1.0rem;" name="consent-statement">
                    <p class="mb-0"> I confirm that I understand the information sheet and have had the opportunity to ask questions.</p>
                </div>
            </div>
            <br><br>

            <div class="row align-items-center">
                <div class="col-12 d-flex">
                    <input type="checkbox" class="form-check-input me-2" style="margin-left: -1.0rem;" name="consent-statement">
                    <p class="mb-0"> I understand that my participation is voluntary, and I am free to withdraw at any time without giving a reason and without any adverse consequences.</p>
                </div>
            </div>
            <br><br>

            <div class="row align-items-center">
                <div class="col-12 d-flex">
                    <input type="checkbox" class="form-check-input me-2" style="margin-left: -1.0rem;" name="consent-statement">
                    <p class="mb-0">I consent to the processing of my personal information such as my name and course for the purposes explained to me.</p>
                </div>
            </div>
            <br><br>

            <div class="row align-items-center">
                <div class="col-12 d-flex">
                    <input type="checkbox" class="form-check-input me-2" style="margin-left: -1.0rem;" name="consent-statement">
                    <p class="mb-0">I understand who will have access to my personal information, how the data will be stored, and what will happen to the data at the end of the research project.</p>
                </div>
            </div>
            <br><br>

            <div class="row align-items-center">
                <div class="col-12 d-flex">
                    <input type="checkbox" class="form-check-input me-2" style="margin-left: -1.0rem;" name="consent-statement">
                    <p class="mb-0">I understand that after the research project, anonymised data may be made publicly available via a data repository.</p>
                </div>
            </div>
            <br><br>
    
            <div class="row align-items-center">
                <div class="col-12 d-flex">
                    <input type="checkbox" class="form-check-input me-2" style="margin-left: -1.0rem;" name="consent-statement">
                    <p class="mb-0">I understand how the findings and results of the research project will be written up and published.</p>
                </div>
            </div>
            <br><br>
            <!-- ... (repeat for all other consent statements) ... -->
            <form id="consent-form" action="/participant/login" method="POST">
                <div class="mb-3">
                    <label for="gender" class="form-label">What is your gender?</label>
                    <select class="form-select" id="gender" name="gender" required>
                        <option value="">Choose...</option>
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                        <option value="other">Other</option>
                        <option value="prefer-not-to-say">Prefer not to say</option>
                    </select>
                </div>
                
                <div class="mb-3">
                    <label for="age" class="form-label">What is your age?</label>
                    <input type="text" class="form-control" id="age" name="age" placeholder="Enter age (18-99) or 'Prefer not to say'" required>
                </div>
            </form>
</section>
<p><b>Thank you for participating in our research.</b></p>
<button class="btn" id="proceedToLogin">Confirm</button>
</section>
</body>

<script>
var mainCheckbox = document.getElementById("consent-checkbox");
mainCheckbox.addEventListener("click", () => {
mainCheckbox.checked ? mainCheckbox.parentElement.classList.remove("border-warning") : mainCheckbox.parentElement.classList.add("border-warning");
});

document.getElementById("proceedToLogin").addEventListener("click", (event) => {
// Check if the main checkbox is checked
if (!document.getElementById('consent-checkbox').checked) {
    document.getElementById('consent-checkbox').parentElement.classList.add("border-danger");
    event.preventDefault();
    window.alert("Please provide an electronic signature by clicking the checkbox");
    return;
}

document.getElementById('consent-checkbox').parentElement.classList.remove("border-danger");

// Check if all consent checkboxes are ticked
var consentStatements = document.getElementsByName('consent-statement');
for (let item of consentStatements) {
    if (!item.checked) {
        item.classList.add("border");
        item.classList.add("border-2");
        item.classList.add("border-danger");
        event.preventDefault();
        window.alert("Please tick all consent statements to confirm your agreement");
        return;
    }
    item.classList.remove("border");
    item.classList.remove("border-2");
    item.classList.remove("border-danger");
}

// Validate gender selection
var gender = document.getElementById('gender');
if (gender.value === "") {
    gender.classList.add("border-danger");
    event.preventDefault();
    window.alert("Please select your gender");
    return;
}
gender.classList.remove("border-danger");

// Validate age input
var age = document.getElementById('age');
var ageValue = age.value.trim();
if (ageValue === "") {
    age.classList.add("border-danger");
    event.preventDefault();
    window.alert("Please enter your age or select 'Prefer not to say'");
    return;
}
if (ageValue.toLowerCase() !== "prefer not to say") {
    var ageNum = parseInt(ageValue);
    if (isNaN(ageNum) || ageNum < 18 || ageNum > 99) {
        age.classList.add("border-danger");
        event.preventDefault();
        window.alert("Please enter a valid age between 18 and 99, or 'Prefer not to say'");
        return;
    }
}
age.classList.remove("border-danger");

// If validation passes, submit the form and route to the next page
const form = document.getElementById("consent-form");
form.submit();
});
</script>

</html>